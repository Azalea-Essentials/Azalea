import{world as e}from"@minecraft/server";import{Database as r}from"./db";function t(){return Date.now()-1690749900445}export function getID(r){let c=0;try{c=e.scoreboard.getObjective("player_ids").getScore(r.scoreboardIdentity)}catch{c=0}if(!c){c=t();let a=t();try{e.scoreboard.addObjective("player_ids","Player IDs (Players)")}catch{}e.scoreboard.getObjective("player_ids").setScore(r.scoreboardIdentity,a)}return c}export function cacheId(r){try{e.scoreboard.addObjective("player_ids_cache","Player IDs (Names)")}catch{}e.getDimension("overworld").runCommand(`scoreboard players set "cache-${r.name}" player_ids_cache ${getID(r)}`)}export function getPlayerDb(e){let t=getID(e);return new r(`${t}`)}export function getCachedId(r){try{e.scoreboard.addObjective("player_ids_cache","Player IDs (Names)")}catch{}let t=e.scoreboard.getObjective("player_ids_cache"),c=t.getParticipants().find((e=>e.displayName==`cache-${r}`));return c?t.getScore(c):null}