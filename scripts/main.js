import"./configurator";import"./verification";import"./commandBuilder";import"./legacyPlayerShopNoChestUI";import{ScoreboardIdentityType as e,system as t,world as o}from"@minecraft/server";import{ActionFormData as r,ModalFormData as a}from"@minecraft/server-ui";import{beforeChat as s}from"./beforeChat";import{commands as n}from"./commands";const m={};import i from"./commands-folder\\warp.js";m.Warp=i;import l from"./commands-folder\\version.js";m.Version=l;import c from"./commands-folder\\verify.js";m.Verify=c;import d from"./commands-folder\\uptime.js";m.Uptime=d;import f from"./commands-folder\\trashsky.js";m.Trashsky=f;import p from"./commands-folder\\toggle.js";m.Toggle=p;import u from"./commands-folder\\tipmanager.js";m.Tipmanager=u;import g from"./commands-folder\\test.js";m.Test=g;import y from"./commands-folder\\tagcmd.js";m.Tagcmd=y;import h from"./commands-folder\\tadpole.js";m.Tadpole=h;import b from"./commands-folder\\staffchat.js";m.Staffchat=b;import j from"./commands-folder\\speakas.js";m.Speakas=j;import v from"./commands-folder\\spawn.js";m.Spawn=v;import $ from"./commands-folder\\shop.js";m.Shop=$;import w from"./commands-folder\\setup.js";m.Setup=w;import C from"./commands-folder\\server-info.js";m.ServerInfo=C;import S from"./commands-folder\\selecttheme.js";m.Selecttheme=S;import k from"./commands-folder\\rolldice.js";m.Rolldice=k;import E from"./commands-folder\\review.js";m.Review=E;import T from"./commands-folder\\report.js";m.Report=T;import I from"./commands-folder\\realhack.js";m.Realhack=I;import N from"./commands-folder\\ping.js";m.Ping=N;import M from"./commands-folder\\permission.js";m.Permission=M;import P from"./commands-folder\\pay.js";m.Pay=P;import O from"./commands-folder\\party.js";m.Party=O;import A from"./commands-folder\\p8iugouhgv.js";m.P8iugouhgv=A;import R from"./commands-folder\\mute.js";m.Mute=R;import z from"./commands-folder\\mail.js";m.Mail=z;import U from"./commands-folder\\lore.js";m.Lore=U;import B from"./commands-folder\\home.js";m.Home=B;import L from"./commands-folder\\help.js";m.Help=L;import D from"./commands-folder\\floatingtext.js";m.Floatingtext=D;import V from"./commands-folder\\enchant.js";m.Enchant=V;import x from"./commands-folder\\doggo.js";m.Doggo=x;import F from"./commands-folder\\dev.js";m.Dev=F;import J from"./commands-folder\\credits.js";m.Credits=J;import W from"./commands-folder\\crates.js";m.Crates=W;import H from"./commands-folder\\cooldowns.js";m.Cooldowns=H;import Y from"./commands-folder\\cls.js";m.Cls=Y;import X from"./commands-folder\\claim.js";m.Claim=X;import _ from"./commands-folder\\chatrankformat.js";m.Chatrankformat=_;import G from"./commands-folder\\broadcast.js";m.Broadcast=G;import Z from"./commands-folder\\bind.js";m.Bind=Z;import q from"./commands-folder\\ban.js";m.Ban=q;import K from"./commands-folder\\announcements.js";m.Announcements=K;import Q from"./commands-folder\\addrank.js";m.Addrank=Q;import ee from"./commands-folder\\addlb.js";m.Addlb=ee;import te from"./commands-folder\\ab.js";m.Ab=te;const oe={};import re from"./events\\WarpScriptevent.js";oe.WarpScriptevent=re;import ae from"./events\\TrashSkyblock.js";oe.TrashSkyblock=ae;import se from"./events\\speakas.js";oe.Speakas=se;import ne from"./events\\PlayerSpawned.js";oe.PlayerSpawned=ne;import me from"./events\\itemUseCommunityCenter.js";oe.ItemUseCommunityCenter=me;import ie from"./events\\initialize.js";oe.Initialize=ie;import le from"./events\\heartbeat-main.js";oe.HeartbeatMain=le;import ce from"./events\\combatlog.js";oe.Combatlog=ce;import de from"./events\\chestShop.js";oe.ChestShop=de;import fe from"./events\\bindablechangename.js";oe.Bindablechangename=fe;import pe from"./events\\AzaleaOpenUi.js";oe.AzaleaOpenUi=pe;import ue from"./events\\antispam.js";oe.Antispam=ue;import{Database as ge}from"./db";import{ActionForm as ye,MessageForm as he,ModalForm as be}from"./form_func";import{NicknamesModule as je}from"./nicknames";import{uiManager as ve}from"./uis";import{warps as $e}from"./warpsapi";import{eventMgr as we}from"./eventManager";import{openShopUI as Ce}from"./shopui";t.beforeEvents.watchdogTerminate.subscribe((e=>{e.cancel=!0}));for(const e of Object.values(oe))we.listen(e.name,e.callback);we.emit("initialize"),t.runInterval((()=>{we.emit("heartbeat")}),20);let Se=new ge("Config");ve.addUI("Azalea0.9.1/MoneyTransfer",((e,t="NONE",r=0,a=null)=>{let s=new be,n=[...o.getPlayers()];s.title("Money Transfer"),s.dropdown("Select a player to send money to:",n.map((e=>({option:`${e.name}${Pe(e)?" [ ADMIN ]":""}`,callback(){}}))),r,(()=>{}));let m=0,i=o.scoreboard.getObjective(Se.get("MoneyScoreboard","money"));try{m=i.getScore(e.scoreboardIdentity),m||(m=0)}catch{m=0}s.textField(`Type how much you want to send (MAX $${m.toLocaleString()}):${"NONE"!=t?`\n§c[ERROR] ${t}`:""}`,"Type any number",a,(()=>{})),s.show(e,!0,((e,t)=>{if(t.canceled)return;if(!/^\d+$/.test(t.formValues[1]))return ve.open("Azalea0.9.1/MoneyTransfer",e,"The value entered is not a valid number.",t.formValues[0],t.formValues[1]);let r=0,a=o.scoreboard.getObjective(Se.get("MoneyScoreboard","money"));try{r=a.getScore(e.scoreboardIdentity),r||(r=0)}catch{r=0}let s=parseInt(t.formValues[1]);if(r<s)return ve.open("Azalea0.9.1/MoneyTransfer",e,`$${r.toLocaleString()} is not enough money to give $${s.toLocaleString()} to someone`,t.formValues[0],t.formValues[1]);let m=n[t.formValues[0]],i=new he;i.title("---- CONFIRMATION ----"),i.body(`Are you sure you want to give $${s.toLocaleString()} to ${m.name}?`),i.button1("Yes",(()=>{e.sendMessage("§cCanceled!")})),i.button2("No",(()=>{let t=0;try{t=a.getScore(m.scoreboardIdentity),t||(t=0)}catch{t=0}r-=s,t+=s,m.id!=e.id&&a.setScore(e.scoreboardIdentity,r),m.id!=e.id&&a.setScore(m.scoreboardIdentity,t),m.sendMessage(`§e@${e.name} §rhas transfered §a$${s.toLocaleString()} §rto you`);let o=new he;o.title("SENT"),o.body("Successfully sent money"),o.button1("Ok"),o.button2("Ok"),o.show(e)})),i.show(e)}))})),t.run((()=>{try{o.scoreboard.addObjective("themes")}catch{}})),je();for(const e of Object.values(m))e(n);let ke=`${Date.now()}.${Math.floor(8196*Math.random()).toString(16)}`,Ee=Date.now(),Te=Date.now();o.afterEvents.playerJoin.subscribe((e=>{let o=new ge(`PLAYER-${e.playerName}`),r=JSON.parse(o.get("JoinsList")?o.get("JoinsList"):"[]");r.push({d:Date.now(),t:t.currentTick}),o.set("JoinsList",JSON.stringify(r))}));let Ie="#HT(staffchat,#BC[#NCStaffChat#BC] ,)§r#BC[#RC#R(§r#BC] [§r#RC)§r#BC] §r#NC#P #BC#DRA §r#MC#M",Ne=Se.get("ChatrankFormat")?Se.get("ChatrankFormat"):Ie,Me="!";function Pe(e){return e.isOp()||e.hasTag("admin")}t.runInterval((()=>{Me=Se.get("Prefix","!"),Se.get("Prefix")||Se.set("Prefix","!"),Ne=Se.get("ChatrankFormat")?Se.get("ChatrankFormat"):null,Ne||(Se.set("ChatrankFormat",Ie),Ne=Ie),Te=Date.now(),new ge("Uptime").set(ke,JSON.stringify({from:Ee,to:Te}))}),100);o.beforeEvents.chatSend.subscribe(s);let Oe=[];function Ae(e){for(const t of o.getPlayers())if(t.name.toLocaleLowerCase()==e.toLowerCase())return t;return null}t.runInterval((()=>{let t=new ge("LB");Oe=t.get("leaderboards")?JSON.parse(t.get("leaderboards")):[];let r=o.getDimension("overworld"),a=r.getEntities({tags:["config-ui"]});for(const t of a){let r=[],a=o.scoreboard.getObjective("db-Config"),s=a.displayName?a.displayName:a.id;r.push(`§8<-=- §b${s[0].toUpperCase()}${s.substring(1)} §8-=->`);let n=a.getParticipants(),m=[];for(const t of n)"commands.scoreboard.players.offlinePlayerName"!=t.displayName&&t.type==e.Player&&m.push({player:t.displayName,score:a.getScore(t)});m=m.sort(((e,t)=>t.score-e.score));for(const e of m)r.push(`§a${e.player} §7${e.score}`);let i=r.join("\n§r");t.nameTag=i}for(const e of Oe)try{let t=r.getEntities({tags:[`id:${e.id}`]}),a=[];try{let t=o.scoreboard.getObjective(e.objective),r=t.displayName?t.displayName:t.id,s=n.themeMgr.getTheme(e.lbTheme?e.lbTheme:0);a.push(`${s.category}-- §l${s.header?s.header:s.command}${r[0].toUpperCase()}${r.substring(1)} §r${s.category}--`);let m=t.getParticipants(),i=[];for(const e of m)if("commands.scoreboard.players.offlinePlayerName"!=e.displayName){if("Player"!=e.type)return;i.push({player:e.displayName,score:t.getScore(e)})}i=i.sort(((e,t)=>t.score-e.score));for(const e of i)try{let t=Ae(e.player),o=t.getTags().filter((e=>e.startsWith("rank:"))).map((e=>e.substring(5)));o.length||o.push(`${s.defaultRankColor}Member`);let r=t.getTags().find((e=>e.startsWith("name-color:")));r&&(r=r.substring(11));let n=t.getTags().find((e=>e.startsWith("bracket-color:")));n=n?n.substring(14):s.defaultBracketColor,a.push(`${n}[§r${s.defaultRankColor}${o.join(`§r${n}] [`)}§r${n}] ${r||s.defaultNameColor}${t.name} §r§7: §r§a${e.score}`)}catch{}let l=a.map((e=>{let t=e,o="abcdefghijklmnopqrstuvwxyz1234567890".split("");for(const e of o)t=t.replaceAll("§"+e,"");return t})).sort(((e,t)=>t.length-e.length))[0];console.warn(l),a[0]=`${s.category}${"-".repeat(Math.floor(l.length/2-`${s.header?s.header:s.command}${r[0].toUpperCase()}${r.substring(1)}`.length/2-1))} §l${s.header?s.header:s.command}${r[0].toUpperCase()}${r.substring(1)} §r${s.category}${"-".repeat(Math.floor(l.length/2)-`${s.header?s.header:s.command}${r[0].toUpperCase()}${r.substring(1)}`.length/2-1)}`}catch{a.push("§cERROR")}let s=a.join("\n§r");if(t&&t.length){if(t[0].nameTag=s,t.length>1)for(let e=1;e<t.length;e++)t[e].kill()}else{let t=r.spawnEntity("minecraft:rabbit",{x:e.loc.x,y:e.loc.y,z:e.loc.z});t.nameTag=s,t.addTag(`id:${e.id}`)}}catch{}}),80),t.afterEvents.scriptEventReceive.subscribe((e=>{if("Entity"==e.sourceType&&we.emit("ScriptEventEntity",e),"azalea_warps"==e.id.split(":")[0]&&"Entity"==e.sourceType){let t=new ye;t.title("Warps"),t.body("Click a warp to teleport to it.");for(const o of $e.getAllWarps())t.button(o,null,((t,r)=>{$e.tpDB(e.sourceEntity,o)}));t.show(e.sourceEntity,!1,((e,t)=>{}))}if(console.warn(e.id),"azalea_ui"==e.id.split(":")[0]){let t=e.id.split(":")[1];ve.open("Azalea0.9.0/FormPreview",e.sourceEntity,t)}function s(e,t){const o=m();return(s=function(e,t){return o[e-=263]})(e,t)}const n=s;function m(){const e=["---- HELL ----","body","azalea:hell","3883NycrLR","455NoXUGM","sourceEntity","14nvdGrT","title","button1","157834XBYIam","3207335mGvnlE","2046660mZapag","39440rlnvIk","Entity","8929304NhAXye","sourceType","73074UdDJFM","9DPHYpX","6318836fBzkZA","You are either trying to read this obfuscated code or you are Protogen1164"];return(m=function(){return e})()}if(function(e,t){const o=s,r=e();for(;;)try{if(867944===-parseInt(o(275))/1*(parseInt(o(278))/2)+-parseInt(o(280))/3+parseInt(o(267))/4+-parseInt(o(279))/5+parseInt(o(265))/6*(-parseInt(o(273))/7)+-parseInt(o(263))/8*(-parseInt(o(266))/9)+parseInt(o(281))/10*(parseInt(o(272))/11))break;r.push(r.shift())}catch(e){r.push(r.shift())}}(m),e.id==n(271)){if(e[n(264)]!=n(282))return;let t=new he;t[n(270)](n(268)),t[n(276)](n(269)),t.button1(""),t[n(277)](""),t.show(e[n(274)])}if("azalea:open_debug_ui"==e.id&&"Entity"==e.sourceType){let s=e.sourceEntity;t.run((()=>{let e=o.scoreboard.getObjectives().filter((e=>e.id.startsWith("db-"))),t=new r;for(const o of e)t.button(o.displayName);t.show(s).then((t=>{if(t.canceled)return;let o=e[t.selection].id.substring(3),n=new ge(o),m=n.keys(),i=new r;for(const e of m)i.button(`KEY: ${e}`);i.show(s).then((e=>{if(e.canceled)return;let t=m[e.selection],i=new r;i.title(`§aView/edit key§r: §r${o}§7/§r${t}`),i.body(`Value: ${n.get(t)}`),i.button("Delete"),i.button("Edit"),i.show(s).then((e=>{if(!e.canceled)if(0==e.selection)n.delete(t);else{let e=new a;e.title(`§r§aEdit key§r: §r${o}§7/§r${t}`),e.textField("New value","Type a new value...",n.get(t)),e.show(s).then((e=>{e.canceled||e.formValues[0]&&n.set(t,e.formValues[0])}))}}))}))}))}))}})),o.afterEvents.entityDie.subscribe((e=>{"minecraft:player"===e.deadEntity.typeId&&e.damageSource.damagingEntity&&e.damageSource.damagingEntity.typeId})),o.afterEvents.entityHurt.subscribe((e=>{})),o.afterEvents.entityDie.subscribe((e=>{})),t.runInterval((()=>{for(const e of o.getPlayers());}),1),o.afterEvents.itemUse.subscribe((e=>{e.itemStack.typeId})),ve.addUI("AzaleaExtra/Shop",(e=>{Ce(e)}));let Re=new ge("Binds");o.beforeEvents.itemUse.subscribe((e=>{let o=Re.get(e.itemStack.typeId);o&&t.run((()=>{e.source.runCommand(o)}))}));