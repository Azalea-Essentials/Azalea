import{prismarineDb as t}from"./lib/@trash/PrismarineDB/prismarine-db";let i=t.table("Permissions");export function isAdmin(t,e="_LEGACY"){if("_LEGACY"==e)return t.isOp()||t.hasTag("admin");let s=i.findDocuments({type:"role"});for(const i of s)if(t.hasTag(i.data.tag)||"default"==i.data.tag||"admin"==i.data.tag&&t.isOp()){if(i.data.isAdmin)return!0;if(i.data.perms.includes(e))return!0}return!1}export const permList=new class{#t;constructor(){this.#t=[],this.#i()}#i(){i.findFirst({tag:"default",type:"role"})||i.insertDocument({tag:"default",type:"role",isAdmin:!1,isDefault:!0,version:"2.2:0",perms:[]}),i.findFirst({tag:"admin",type:"role"})||i.insertDocument({tag:"admin",type:"role",version:"2.2:0",isAdmin:!0,perms:[]})}addPermission(t,i){this.#t.push({displayName:t,id:i})}getList(){return this.#t}};export{i as permissionDb};