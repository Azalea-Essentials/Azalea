import{world as e}from"@minecraft/server";import{CommandBuilder as r}from"../commandBuilder";import{isAdmin as t}from"../isAdmin";import{warps as n}from"../warpsapi";export default function o(o){new r("warp").desc("Create locations players can teleport to").category("Teleportation").callback((({msg:e,args:r,theme:o,response:a})=>{if(r.length){if("set"==r[0])return t(e.sender)?(n.setDB(r.slice(1).join(" "),e.sender.location,e.sender.dimension),a("SUCCESS Set warp!")):a("ERROR This command requires admin!");if("set-r"==r[0])return t(e.sender)?(n.setDBRotation(r.slice(1).join(" "),e.sender.location,e.sender.dimension,e.sender.getRotation()),a("SUCCESS Set warp with rotation!")):a("ERROR This command requires admin!");if("list"==r[0]){let e=[];e.push(`${o.category}+--- ${o.header}Warps ${o.category}---+`);for(const r of n.getAllWarps())e.push(`${o.category}> §r${o.command}${r}`);return a(`TEXT ${e.join("\n§r")}`)}return"tp"==r[0]?n.hasDB(r.slice(1).join(" "))?(n.tpDB(e.sender,r.slice(1).join(" ")),a("SUCCESS Teleporting...")):a("ERROR Warp not found!"):"remove"==r[0]?t(e.sender)?n.hasDB(r.slice(1).join(" "))?(n.warpsDb.hardDelete(r.slice(1).join(" ")),a("SUCCESS Deleted!")):a("ERROR Warp not found!"):a("ERROR You are not admin"):n.hasDB(r.join(" "))?(n.tpDB(e.sender,r.join(" ")),a("SUCCESS Teleporting...")):a("ERROR Warp not found: Invalid argument, the valid ones are: set-r, set, list, tp, remove")}if(n.hasDB(r.join(" ")))return n.tpDB(e.sender,r.join(" ")),a("SUCCESS Teleporting...");{let e=[];e.push(`${o.category}+--- ${o.header}Warps ${o.category}---+`);for(const r of n.getAllWarps())e.push(`${o.category}> §r${o.command}${r}`);return a(`TEXT ${e.join("\n§r")}`)}})).register(),new r("wconvert").category("Data Conversion").desc("Convert old azalea warps to the new ones").callback((({msg:r,args:t,theme:o,response:a})=>{let s=["minecraft:overworld","minecraft:nether","minecraft:the_end"];n.getAllOldWarps().forEach((r=>{let t=n.get(r);n.setDB(r,{x:t.x,y:t.y,z:t.z},e.getDimension(s[t.dimension])),a(`SUCCESS Converted warp: ${r}§r §7to the new format`)}))})).register()}