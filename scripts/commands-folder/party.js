import{world as e}from"@minecraft/server";let t=new Map,r=new Map;export default function a(a){a.addCommand("party",{description:"Parties, most likely with 1 person as you have no friends.",category:"WIP Party System",async onRun(a,n,s,d){if(!n.length)return d("ERROR You require a party action: join, create, chat, delete, leave");if("create"==n[0])return r.has(a.sender.id)?d("ERROR You already made a party"):(r.set(a.sender.id,{createdAt:Date.now()}),t.set(a.sender.id,a.sender.id),d("SUCCESS Created party!"));if("join"==n[0]){let s,i=n.slice(1).join(" ");for(const t of e.getPlayers())if(t.name.toLowerCase()==i.toLowerCase()){s=t;break}if(!s)return d("ERROR Player is not online!");if(!r.has(s.id))return d("ERROR Player does not own a party.");r.get(s.id);t.set(a.sender.id,s.id);for(const r of e.getPlayers())t.has(r.id)&&t.get(r.id)==s.id&&r.sendMessage(`§e${a.sender.name} joined the party.`);d("SUCCESS Joined party!")}else if("leave"==n[0])if(t.has(a.sender.id)){let r=t.get(a.sender.id);for(const n of e.getPlayers())t.has(n.id)&&t.get(n.id)==r&&n.sendMessage(`§e${a.sender.name} left the party.`);t.delete(a.sender.id),d("SUCCESS Left party!")}else d("ERROR Theres no party to leave, you probably need to find some friends.")}}),a.addCommand("pc",{description:"Party chat",category:"WIP Party System",async onRun(r,a,n,s){if(!a.length)return s("ERROR Please include a message");if(!t.has(r.sender.id))return s("ERROR You're not in a party, find some friends.");let d=t.get(r.sender.id);for(const n of e.getPlayers())t.has(n.id)&&t.get(n.id)==d&&n.sendMessage(`§d[§5Party Chat§d] §e${r.sender.name} > §r${a.join(" ")}`)}})}