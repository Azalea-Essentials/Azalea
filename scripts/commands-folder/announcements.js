import{world as n}from"@minecraft/server";import{Database as e}from"../db";import{isAdmin as t}from"../isAdmin";export default function s(s){s.addCommand("announcements",{description:"Send out announcements",category:"Management",author:"TRASH",category:"Management",usage:"!announcements <post | view> [text]",onRun(s,o,i,r,c,a){let m=new e("AnncList");m.get("AnncList")||m.set("AnncList","[]");let u=JSON.parse(m.get("AnncList")?m.get("AnncList"):"[]");if(o.length){if("announce"==o[0]){if(!t(s.sender))return r("ERROR This requires admin!");u.push({t:o.slice(1).join(" "),s:s.sender.name}),m.set("AnncList",JSON.stringify(u)),n.sendMessage(`§8§l[§r §dANNOUNCEMENT §l§8] §r§7${o.slice(1).join(" ")}`),r("SUCCESS Posted!")}else if("view"==o[0]){let n=[];n.push(`${i.category}<-=- ${i.command}Announcements ${i.category}-=->`);for(const e of u)n.push(`${i.command}${e.s} ${i.description}${e.t}§r`);n.push(""),r(`TEXT ${n.join("\n")}`)}}else{let n=[];n.push(`${i.category}<-=- ${i.command}Announcements ${i.category}-=->`);for(const e of u)n.push(`${i.command}${e.s} ${i.description}${e.t}§r`);n.push(""),r(`TEXT ${n.join("\n")}`)}}})}