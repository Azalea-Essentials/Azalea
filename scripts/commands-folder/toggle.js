import{system as o,world as r}from"@minecraft/server";import{isAdmin as e}from"../isAdmin";export default function n(n){o.run((()=>{try{r.scoreboard.addObjective("cmdtoggles","Command Toggles")}catch{}})),n.addCommand("toggle",{description:"Toggle a command",admin:!0,category:"Management",async onRun(n,a,d,s){if(!e(n.sender))return s("ERROR This command requires admin");o.run((()=>{try{r.scoreboard.addObjective("cmdtoggles","Command Toggles")}catch{}}));let t=r.getDimension("overworld"),l=r.scoreboard.getObjective("cmdtoggles"),i=l.getParticipants().find((o=>o.displayName==a[0])),m=i?l.getScore(i):0;m++,m>3&&(m=0),0==m?s(`TEXT ${d.successColor}§l[TOGGLED] §r${d.successColor}Default permissions`):1==m?s(`TEXT ${d.warningColor}§l[TOGGLED] §r${d.warningColor}Admins only`):2==m?s(`TEXT ${d.errorColor}§l[TOGGLED] §r${d.errorColor}Completely disabled`):3==m&&s(`TEXT ${d.infoColor}§l[TOGGLED] §r${d.infoColor}Enabled for everyone (BETA)`),o.run((()=>{t.runCommand(`scoreboard players set "${a[0]}" cmdtoggles ${m}`)}))}})}