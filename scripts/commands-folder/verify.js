import{system as e,world as i}from"@minecraft/server";import{Database as r}from"../db";import{warps as n}from"../warpsapi";export default function t(i){i.addCommand("verify",{description:"Get access",category:"Utilities",onRun(i,t,a,o){try{let a=new r("Config");if(!("true"==a.get("EnableVerification")))return o("ERROR No need to verify, verification is not enabled.");{if(i.sender.hasTag("verified"))return o("INFO You're already verified!");let r="private"==a.get("VerificationType")?"private":"public";if("private"==r){let r=a.get("VerificationCode");if(!r)return o("ERROR If you are not an admin, tell the admins to configure the verification code, or if you are an admin, configure the verification code.");if(t.join(" ")!=r)return o("ERROR Invalid verification code");let f=i.sender;return e.run((()=>f.addTag("verified"))),e.run((()=>{n.tpDB(f,"spawn")})),o("SUCCESS You are now verified!")}if("public"==r){let r=i.sender;return e.run((()=>r.addTag("verified"))),e.run((()=>{n.tpDB(r,"spawn")})),o("SUCCESS You are now verified!")}}}catch(e){console.warn(e)}}})}